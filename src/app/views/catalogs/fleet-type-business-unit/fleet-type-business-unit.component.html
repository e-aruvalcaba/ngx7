<div
    xFlex
    [ngStyle.xs]="{'margin': '0px'}"
    [ngStyle]="{'margin': '10px'}"
    fxLayout="column">
    <div fxFlex="100%" fxLayout="row">
        <div fxFlex="100%">
          <h2>{{ translate('rccc.catalogs.fleet_constraints.title') }} <span aria-hidden="true" class="cmx-icon-right-single" style="color: #3FA9F5; font-size: 12pt;"></span> {{ translate('rccc.catalogs.fleet_type_bu.title') }}</h2>
        </div>
    </div>
    <div fxFlex="100%" fxLayout="column" [ngStyle]="{'margin-top': '10px'}">
        <div class="catalog-container">
            <cmx-alert></cmx-alert>
            <cmx-datatable
                [data]="fleetTypesBusinessUnit"
                [canEdit]="true"
                [canDelete]="true"
                [canAdd]="true"
                fontSize="9pt"
                [alternateRowStyle]="true"
                (onChanged)="OnChangeComboBox($event)"
                (onAdded)="OnSaveFleetTypes($event)"
                (onEdited)="OnChangeFleetType($event)"
                (onDeleted)="OnDeleteFleetType($event)"
                (onCancel)="OnCancel($event)"
                errorMaxLenMessage="{{translate('datatable.errors.max_len')}}"
                errorMinLenMessage="{{translate('datatable.errors.min_len')}}"
                errorMaxValueMessage="{{translate('datatable.errors.min')}}"
                errorMinValueMessage="{{translate('datatable.errors.max')}}"
                errorRequiredMessage="{{translate('datatable.errors.is_required')}}"
                errorPatternMessage="{{translate('datatable.errors.pattern')}}"
                labelAddNew="{{translate('datatable.labels.add_new')}}"
                labelShowAll="{{translate('datatable.labels.show_all')}}"
                labelSaveConfiguration="{{translate('datatable.labels.save_configuration')}}"
                labelCancelUpdate="{{translate('datatable.labels.cancel_update')}}"
                labelEditRecord="{{translate('datatable.labels.edit_record')}}"
                >
              <cmx-data-table-column
                property="fleetId"
                header="{{ translate('rccc.catalogs.fleet_type_bu.business_unit') }}"
                [visible]="false">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="plantId"
                header="{{ translate('rccc.catalogs.fleet_type_bu.business_unit') }}"
                [isEditable]="true"
                editModeType="comboBox"
                [dataSource]="plants"
                valueProperty="plantId"
                displayProperty="plantDesc"
                labelProperty="plantDesc"
                expandedProperties="fleetId"
                expandedHeaders="Id"
                [width]="23">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="fleetTypeId"
                header="{{ translate('rccc.catalogs.fleet_type_bu.fleet_type') }}"
                [isEditable]="true"
                editModeType="comboBox"
                [dataSource]="fleetTypes"
                valueProperty="fleetTypeId"
                displayProperty="fleetTypeCode"
                labelProperty="fleetTypeCode"
                [width]="17">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="productTypeGroupId"
                header="{{ translate('digital_confirmation.catalogs.fleet_type_bu.material_group_type') }}"
                [isEditable]="true"
                editModeType="comboBox"
                [dataSource]="productTypeGroups"
                valueProperty="productTypeGroupId"
                displayProperty="productTypeGroupDesc"
                labelProperty="productTypeGroupDesc"
                [width]="15">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="fleetCoverageId"
                header="{{ translate('rccc.catalogs.fleet_type_bu.fleet_coverage') }}"
                [isEditable]="true"
                editModeType="comboBox"
                [dataSource]="fleetCoverage"
                valueProperty="fleetCoverageId"
                displayProperty="fleetCoverageCode"
                labelProperty="fleetCoverageCode"
                expandedProperties="creationDateTime, userAccountCreation"
                expandedHeaders="{{ translate('rccc.catalogs.creationDateTime') }}, {{ translate('rccc.catalogs.creationUserId') }}"
                [visible]="isCoverageVisible"
                [width]="15">
              </cmx-data-table-column>
              <!--
              <cmx-data-table-column
                property="productId"
                header="{{ translate('rccc.catalogs.fleet_type_bu.sku_number') }}"
                [isEditable]="true"
                editModeType="comboBox"
                [dataSource]="products"
                valueProperty="productId"
                displayProperty="productDesc"
                labelProperty="productDesc"
                [visible]="false">
              </cmx-data-table-column>
              -->
              <cmx-data-table-column
                property="initialWeight"
                header="{{ translate('rccc.catalogs.fleet_type_bu.initial_weight') }}"
                [isEditable]="true"
                editModeType="number"
                [required]="true"
                expandedProperties="changeDateTime, userAccountChange"
                expandedHeaders="{{ translate('rccc.catalogs.changeDateTime') }}, {{ translate('rccc.catalogs.changeUserId') }}"
                [width]="15">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="finalWeight"
                header="{{ translate('rccc.catalogs.fleet_type_bu.final_weight') }}"
                [isEditable]="true"
                [required]="true"
                editModeType="number"
                [width]="15">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="moffett"
                header="{{ translate('rccc.catalogs.fleet_type_bu.moffett') }}"
                [isEditable]="true"
                editModeType="checkbox"
                [width]="10">
              </cmx-data-table-column>
              <cmx-data-table-column
                property="crane"
                header="{{ translate('rccc.catalogs.fleet_type_bu.crane') }}"
                [isEditable]="false"
                [visible]="false"
                editModeType="checkbox">
              </cmx-data-table-column>
            </cmx-datatable>
            <div class="not-found" *ngIf="!hasFleetItems">
              {{ translate('database.errors.no_results') }}
            </div>
            <cmx-dialog
                #deleteFleetType
                data-id="deleteFleetType"
                [enableFooter]="true"
                [enableClose]="true"
                backgroundColor="gray"
                width="650px"
                height="260px"
                minWidth="650px"
                minHeight="260px">
                <cmx-dialog-body>
                  <h3 class="dialog-title">{{messageText}}</h3>
                </cmx-dialog-body>
                <cmx-dialog-footer style="text-align: center;">
                    <div fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="center center">
                        <button cmx-button color="blue" (click)="OnDeleteDialogConfirm()">
                            {{translate('views.global.btn_confirm')}}
                        </button>
                        <button cmx-button color="'red'" (click)="OnDeleteDialogCancel()">
                            {{translate('views.global.btn_cancel')}}
                        </button>
                    </div>
                </cmx-dialog-footer>
            </cmx-dialog>
        </div>
    </div>
</div>