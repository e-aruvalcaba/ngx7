{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@cemex/cmx-sidebar-v7/lib/components/cmx-sidebar.component.ts","ng://@cemex/cmx-sidebar-v7/lib/components/cmx-filter-entity.pipe.ts","ng://@cemex/cmx-sidebar-v7/lib/components/replaceString.pipe.ts","ng://@cemex/cmx-sidebar-v7/lib/components/click-outside.directive.ts","ng://@cemex/cmx-sidebar-v7/lib/cmx-sidebar.module.ts"],"names":["__values","o","m","Symbol","iterator","i","call","next","length","value","done","Redirect","Router","CmxSidebarComponent","translationService","sessionService","media","router","eventBroadcaster","isRTL","_this","this","rtl","hideUserPanel","pathMobileLang","disabledProfile","forceRouterList","collapseEvent","EventEmitter","legalEvent","copyrightEvent","legalEntityClicked","hiddenLegalEntity","showAppNavigation","_searchLegalEntity","_isWaiting","_legalEntityList","_languages","_notificationItems","_languageMenuActive","_fullNameUser","_isCollapsed","_totalLegalEntities","_fetchCount","_showLegalMsg","_legalEntityMsg","_showLegalEntity","_currentPage","mobileBreakpoint","clickMenuOption","customOptionEvent","detectMobile","undefined","_watcher","asObservable","subscribe","Object","defineProperty","prototype","_isMobilePhone","isCollapsed","_isMobile","emit","items","_menuItems","_customOption","_customLegalEntity","_currentLegalEntity","_userProfile","firstName","lastName","charAt","toUpperCase","ngAfterContentInit","getLanguages","getMenuItems","getLegalEntities","ngOnDestroy","preSelectLanguage","item","preSelectedLanguage","showMobileLanguage","_legalEntityMenuActive","navigate","changeLanguage","setLanguage","reloadAppMenuItems","closeLanguageSelection","changeCustomer","clickLegalEntity","preSelectedCustomer","closeCustomerSelection","showLegalEntities","toggleAppNavigation","getLegalEntitiesForCustomers","pt","result","_b","tslib_1.__values","_c","legalEntityDesc","replace","setDisplayLegalEntity","error","console","setCurrentLegalEntityById","localLegalEntity","filter","legalEntityId","getLegalEntityById","filterLegalEntities","userType","searchLegalEntity","getMessage","count","preSelectLegalEntity","selected","copyrightClick","legalClick","onresize","window","innerWidth","fetch","page","setDisplayEntity","clearLegalEntities","concat","legalEntities","totalCount","sessionLegalEntity","sessionStorage","getItem","JSON","parse","e","warn","setLegalEntity","isActiveLegalEntity","normalizeString","fetchMoreEntities","onWindowScroll","event","tracker","target","limit","scrollHeight","clientHeight","scrollTop","preventDefault","languages","log","getSelectedLanguage","language","_currentLang","userProfile","menuApplicationItems","onApplicationItemClick","itemClicked","_clickedApp","menu","menuItems","applicationTitle","shouldForceRouter","applicationUrl","navigateTo","NavigationType","onSubItemClick","subItem","_clickedLink","menuTitle","pathSubItem","getMainPath","menuEndpoint","isLocalHost","location","hostname","indexOf","pathname","shouldDisplayActiveMenu","menuToTest","displayFlag","isItMe","isItMyChild","findIndex","menuItem","toggleSidebar","getArrowIcon","goToProfile","href","goToSettings","signOut","logout","success","message","lang","languageISO","broadcast","Broadcaster","DCM_LANGUAGE_CHANGE","path","arr","split","handleError","Response","body","json","stringify","status","statusText","toString","Observable","throw","setCmxIcons","icon","type","forcedRoutesRegExp","RegExp","join","match","Component","args","selector","template","TranslationService","SessionService","MediaObserver","Optional","Inject","Input","Output","HostListener","FilterLegalEntity","transform","searchValue","toLowerCase","legalEntityTypeCode","Pipe","name","ReplaceStringPipe","sanitizer","wholeString","toReplace","replacedFor","bypassSecurityTrustHtml","DomSanitizer","ClickOutsideDirective","_elementRef","clickOutside","onClick","targetElement","nativeElement","contains","Directive","ElementRef","CmxSidebarModule","NgModule","imports","CommonModule","FormsModule","ReactiveFormsModule","FlexLayoutModule","CmxRadioModule","CmxButtonModule","CmxTooltipModule","exports","declarations"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\r\n    Component,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    HostListener,\r\n    Optional,\r\n    Inject,\r\n    OnDestroy,\r\n    AfterContentInit,\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { SafeResourceUrl } from '@angular/platform-browser';\r\nimport { MediaObserver } from '@angular/flex-layout';\r\n\r\nimport { Subscription, Observable } from 'rxjs';\r\n\r\nimport { TranslationService } from '@cemex-core/angular-localization-v7';\r\nimport { SessionService } from '@cemex-core/angular-services-v7';\r\nimport { Broadcaster } from '@cemex-core/events-v7';\r\nimport { IAppMenuItem, IUserProfile, ILegalEntity } from '@cemex-core/types-v2/dist/index.interface';\r\n\r\nimport { IApplicationMenu } from '../interfaces/menu.dto';\r\n\r\nexport interface ILanguage {\r\n    languageId: number;\r\n    languageName: string;\r\n    languageISO: string;\r\n}\r\n\r\nexport interface ILanguageSelect {\r\n    languageName: string;\r\n    languageISO: string;\r\n    isSelected: boolean;\r\n}\r\n\r\nexport interface ICustomOption {\r\n    iconId: string;\r\n    labelOption: string;\r\n    subOptions: ICustomSubOption[];\r\n}\r\n\r\nexport interface ICustomSubOption {\r\n    idOption: number;\r\n    labelOption: string;\r\n}\r\n\r\nexport interface ISidebarILegalEntity extends ILegalEntity {\r\n    active?: boolean;\r\n    selected?: boolean;\r\n}\r\n\r\nexport enum NavigationType {\r\n    Redirect,\r\n    Router,\r\n}\r\n\r\n@Component({\r\n    selector: 'cmx-sidebar',\r\n    styleUrls: ['./../../../../../../../../scssv4/cmx-components/cmx-sidebar/v4/cmx-sidebar.component.scss'],\r\n    templateUrl: './cmx-sidebar.component.html',\r\n})\r\n\r\nexport class CmxSidebarComponent implements OnDestroy, AfterContentInit {\r\n    public _customLegalEntity: ISidebarILegalEntity;\r\n    public preSelectedCustomer: ISidebarILegalEntity;\r\n    public _legalEntityMenuActive: boolean;\r\n    @Input() public rtl = false;\r\n    @Input() public hideUserPanel = false;\r\n    @Input() public pathMobileLang = '';\r\n    @Input() public disabledProfile = false;\r\n    @Input() public forceRouterList: string[] = [];\r\n    @Output() public collapseEvent: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n    @Output() public legalEvent: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() public copyrightEvent: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output()\r\n    public legalEntityClicked: EventEmitter<ISidebarILegalEntity> = new EventEmitter<ISidebarILegalEntity>();\r\n    public hiddenLegalEntity = false;\r\n    public showAppNavigation = false;\r\n    public _currentLegalEntity: ISidebarILegalEntity;\r\n    public _searchLegalEntity = '';\r\n    public _isWaiting = false;\r\n    public _legalEntityList: ISidebarILegalEntity[] = [];\r\n    public _menuItems: IApplicationMenu[];\r\n    public _languages: ILanguageSelect[] = [];\r\n    public _customOption: ICustomOption;\r\n    public _notificationItems: any[] = [];\r\n    public preSelectedLanguage: string;\r\n    public _languageMenuActive = false;\r\n    public get _showFaded(): boolean { return this._isMobilePhone && !this.isCollapsed; }\r\n    public _fullNameUser = '';\r\n    public developerPortalUrl: SafeResourceUrl;\r\n    public _clickedLink: IAppMenuItem;\r\n    public _clickedApp: IApplicationMenu;\r\n    public _isCollapsed = true;\r\n\r\n    private _totalLegalEntities = 0;\r\n    private _fetchCount = 0;\r\n    private _showLegalMsg = true;\r\n    private _legalEntityMsg = '';\r\n\r\n    private _watcher: Subscription;\r\n    private _isMobile: boolean;\r\n    private _isMobilePhone: boolean;\r\n    private _userProfile: IUserProfile;\r\n    private _showLegalEntity = false;\r\n    private _currentLang: string;\r\n    private _currentPage = 1;\r\n\r\n    @Input()\r\n    set isCollapsed(value: boolean) {\r\n        this._isCollapsed = value;\r\n        // isMobile should initially be true and should initially force collapse to true\r\n        if (this._isMobile) {\r\n            this.collapseEvent.emit(!this._isCollapsed);\r\n        } else {\r\n            this.collapseEvent.emit(this._isCollapsed);\r\n        }\r\n    }\r\n\r\n    get isCollapsed(): boolean {\r\n        return this._isCollapsed;\r\n    }\r\n\r\n    @Input()\r\n    set menuItems(items: IApplicationMenu[]) {\r\n        this._menuItems = items;\r\n    }\r\n\r\n    @Input() private mobileBreakpoint = 1079;\r\n\r\n    @Output()\r\n    private clickMenuOption: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n    @Output()\r\n    private customOptionEvent: EventEmitter<ICustomSubOption> =\r\n        new EventEmitter<ICustomSubOption>();\r\n\r\n    @Input()\r\n    public get customOptions(): ICustomOption {\r\n        return this._customOption;\r\n    }\r\n    public set customOptions(value: ICustomOption) {\r\n        this._customOption = value;\r\n    }\r\n\r\n    @Input()\r\n    public set customLegalEntity(value: ISidebarILegalEntity) {\r\n        this._customLegalEntity = value;\r\n        this._currentLegalEntity = value;\r\n        this._legalEntityList = [];\r\n    }\r\n    public get initials(): string {\r\n        if (this._userProfile && this._userProfile.firstName.length > 0) {\r\n            const lastName: any = this._userProfile.lastName.length > 0 ?\r\n                this._userProfile.lastName.charAt(0).toUpperCase() : '';\r\n            return `${this._userProfile.firstName.charAt(0).toUpperCase()}${lastName}`;\r\n        }\r\n\r\n        return ' ';\r\n    }\r\n\r\n    constructor(\r\n        public translationService: TranslationService,\r\n        private sessionService: SessionService,\r\n        public media: MediaObserver,\r\n        private router: Router,\r\n        private eventBroadcaster: Broadcaster,\r\n        @Optional() @Inject('RTL') isRTL: boolean,\r\n    ) {\r\n        this.detectMobile();\r\n        if (isRTL !== undefined) {\r\n            this.rtl = isRTL;\r\n        }\r\n        this._watcher = media.asObservable().subscribe(() => {\r\n            this.detectMobile();\r\n        });\r\n    }\r\n\r\n    public ngAfterContentInit(): void {\r\n        this.getLanguages();\r\n        this.getMenuItems();\r\n        this.getLegalEntities();\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this._currentPage = 1;\r\n    }\r\n\r\n    public preSelectLanguage(item: any): void {\r\n        this.preSelectedLanguage = item.value;\r\n    }\r\n\r\n    public showMobileLanguage(): void {\r\n        this._legalEntityMenuActive = false;\r\n        this.isCollapsed = false;\r\n        if (this.pathMobileLang) {\r\n            this.router.navigate([this.pathMobileLang]);\r\n        } else {\r\n            this._languageMenuActive = true;\r\n        }\r\n    }\r\n\r\n    public changeLanguage(): void {\r\n        this.translationService.setLanguage(this.preSelectedLanguage);\r\n        this.sessionService.reloadAppMenuItems();\r\n        this.closeLanguageSelection();\r\n    }\r\n\r\n    public changeCustomer(): void {\r\n        this.clickLegalEntity(this.preSelectedCustomer);\r\n        this.closeCustomerSelection();\r\n    }\r\n\r\n    public closeCustomerSelection(): void {\r\n        this._legalEntityMenuActive = false;\r\n        this.isCollapsed = true;\r\n    }\r\n\r\n    public showLegalEntities(): void {\r\n        if (this._customLegalEntity) { return; }\r\n        if (this._isMobilePhone) {\r\n            this._languageMenuActive = false;\r\n            this.isCollapsed = false;\r\n            this._legalEntityMenuActive = true;\r\n            return;\r\n        }\r\n        this.hiddenLegalEntity = !this.hiddenLegalEntity;\r\n    }\r\n\r\n    public toggleAppNavigation(): void {\r\n        this.showAppNavigation = !this.showAppNavigation;\r\n    }\r\n\r\n    public closeLanguageSelection(): void {\r\n        this._languageMenuActive = false;\r\n        this.isCollapsed = true;\r\n    }\r\n\r\n    public getLegalEntitiesForCustomers(): void {\r\n        this._legalEntityMsg = this.translationService.pt('views.sidebar.legal.warning');\r\n        this._isWaiting = true;\r\n        this.sessionService.getLegalEntities(0, 0).subscribe(\r\n            (result: any) => {\r\n                this._legalEntityList = result.legalEntities as ISidebarILegalEntity[];\r\n                for (const item of this._legalEntityList) {\r\n                    item.legalEntityDesc = item.legalEntityDesc.replace(/\\s+/g, ' ');\r\n                }\r\n                this.setDisplayLegalEntity();\r\n                this._isWaiting = false;\r\n            },\r\n            (error: any) => {\r\n                this._legalEntityList = [];\r\n                this._isWaiting = false;\r\n                console.error('An error occurred at getting legal entities!', error);\r\n            });\r\n    }\r\n\r\n    public setCurrentLegalEntityById(value: number): boolean {\r\n        const localLegalEntity: ISidebarILegalEntity[] = this._legalEntityList.filter((item: any) => {\r\n            return item.legalEntityId === value;\r\n        });\r\n\r\n        if (localLegalEntity.length > 0) {\r\n            this.clickLegalEntity(localLegalEntity[0]);\r\n        }\r\n        return localLegalEntity.length > 0;\r\n    }\r\n\r\n    public getLegalEntityById(value: number): ISidebarILegalEntity | void {\r\n        const localLegalEntity: ISidebarILegalEntity[] = this._legalEntityList.filter((item: any) => {\r\n            return item.legalEntityId === value;\r\n        });\r\n        if (localLegalEntity.length > 0) {\r\n            return localLegalEntity[0];\r\n        }\r\n        return;\r\n    }\r\n\r\n    public filterLegalEntities(): void {\r\n        if (this._userProfile && this._userProfile.userType !== 'C') {\r\n            this._fetchCount = 0;\r\n            this._currentPage = 1;\r\n            this._legalEntityList = [];\r\n            if (this._searchLegalEntity.length >= 4) {\r\n                this._isWaiting = true;\r\n                this._showLegalMsg = false;\r\n                this.searchLegalEntity(100, this._currentPage, false, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    public getMessage(count?: number): any {\r\n        if (count !== undefined && count > 0 && this._searchLegalEntity.length > 3) {\r\n            return `${count} ${this.translationService.pt('views.sidebar.legal.results')}`;\r\n        } else if (count !== undefined && count === 0 && this._searchLegalEntity.length > 3) {\r\n            return this.translationService.pt('views.sidebar.legal.no_matches');\r\n        } else {\r\n            return this.translationService.pt('views.sidebar.legal.warning');\r\n        }\r\n    }\r\n\r\n    public preSelectLegalEntity(item: ISidebarILegalEntity): void {\r\n        for (const legalEntity of this._legalEntityList) {\r\n            legalEntity.selected = false;\r\n        }\r\n        item.selected = true;\r\n        this.preSelectedCustomer = item;\r\n    }\r\n\r\n    public copyrightClick(): void {\r\n        this.copyrightEvent.emit();\r\n    }\r\n\r\n    public legalClick(): void {\r\n        this.legalEvent.emit();\r\n    }\r\n\r\n    @HostListener('window:resize', [])\r\n    public onresize(): void {\r\n        this.detectMobile();\r\n    }\r\n\r\n    public detectMobile(): void {\r\n        if (window.innerWidth <= this.mobileBreakpoint) {\r\n            if (!this._isMobile) {\r\n                // if previous value was desktop\r\n                // make collapsed to true\r\n                this._isCollapsed = false;\r\n            }\r\n            this._isMobile = true;\r\n            this._isMobilePhone = true;\r\n        } else {\r\n            this._isMobile = false;\r\n            this._isMobilePhone = false;\r\n        }\r\n    }\r\n\r\n    public searchLegalEntity(fetch: number = 0, page: number = 0, setDisplayEntity?: boolean, clearLegalEntities?: boolean): void {\r\n        this.sessionService.getLegalEntities(fetch, page, this._searchLegalEntity).subscribe(\r\n            (result: any) => {\r\n                if (clearLegalEntities) {\r\n                    this._legalEntityList = [];\r\n                }\r\n                this._legalEntityList = this._legalEntityList.concat(result.legalEntities);\r\n                this._totalLegalEntities = result.totalCount;\r\n                this._fetchCount = this._fetchCount + result.count;\r\n                this._isWaiting = false;\r\n                this._showLegalMsg = true;\r\n                if (setDisplayEntity) {\r\n                    this.setDisplayLegalEntity();\r\n                }\r\n            },\r\n            (error: any) => {\r\n                console.error('An error occurred at getting legal entitieFs!', error);\r\n            },\r\n        );\r\n    }\r\n\r\n    public setDisplayLegalEntity(): void {\r\n        if (this._legalEntityList.length > 0) {\r\n            this._currentLegalEntity = this._legalEntityList[0];\r\n            const sessionLegalEntity: any = sessionStorage.getItem('user_legal_entity');\r\n            if (sessionLegalEntity && sessionLegalEntity !== undefined) {\r\n                try {\r\n                    this._currentLegalEntity = JSON.parse(sessionLegalEntity) as ISidebarILegalEntity;\r\n                } catch (e) {\r\n                    const message: any = `Exception at parsing user_legal_entity from sessionStore:`;\r\n                    console.warn(message, e);\r\n                }\r\n            }\r\n            this.sessionService.setLegalEntity(this._currentLegalEntity);\r\n            // emitter\r\n            this.legalEntityClicked.emit(this._currentLegalEntity);\r\n        }\r\n    }\r\n\r\n    public clickLegalEntity(item: ISidebarILegalEntity): void {\r\n        this._fetchCount = 0;\r\n        this._totalLegalEntities = 0;\r\n        this._currentLegalEntity = item;\r\n        this._searchLegalEntity = '';\r\n        this.sessionService.setLegalEntity(item);\r\n        this.legalEntityClicked.emit(item);\r\n    }\r\n\r\n    public isActiveLegalEntity(item: ISidebarILegalEntity): boolean {\r\n        if (this._currentLegalEntity && item) {\r\n            return this._currentLegalEntity.legalEntityId === item.legalEntityId;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public normalizeString(value: string): string {\r\n        if (value === null || value === undefined) {\r\n            return '';\r\n        }\r\n        const removeSymbols: string = value.replace(/\"/g, '');\r\n        // tslint:disable-next-line:max-line-length\r\n        // const capitalizedLegalEntity: string = (removeSymbols ? removeSymbols.toLowerCase() : removeSymbols).replace(/(?:^|\\s)\\S/g, (a: string) => a.toUpperCase());\r\n        return removeSymbols;\r\n    }\r\n\r\n    public fetchMoreEntities(): void {\r\n        this._currentPage++;\r\n        this.searchLegalEntity(100, this._currentPage, false);\r\n    }\r\n\r\n    @HostListener('scroll', ['$event'])\r\n    public onWindowScroll(event: any): void {\r\n        if (this._totalLegalEntities > this._fetchCount && this._userProfile.userType !== 'C') {\r\n            const tracker: any = event.target;\r\n            const limit: any = tracker.scrollHeight - tracker.clientHeight;\r\n            if (event.target.scrollTop >= limit - 1.6\r\n                && (limit > 0 && event.target.scrollTop > 0)) {\r\n                this._isWaiting = true;\r\n                this._showLegalMsg = false;\r\n                this.fetchMoreEntities();\r\n            }\r\n        } else {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    public getLanguages(): void {\r\n        this.translationService.getLanguages().subscribe(\r\n            (languages: any) => {\r\n                this._languages = languages;\r\n            },\r\n            (error: any) => {\r\n                console.log('error', error);\r\n            },\r\n        );\r\n\r\n        this.translationService.getSelectedLanguage().subscribe(\r\n            (language: any) => {\r\n                // remove menu api execution\r\n                // if (!this._menuItems) { this.sessionService.reloadAppMenuItems(); }\r\n                this._currentLang = language;\r\n            },\r\n            (error: any) => {\r\n                console.log('error', error);\r\n            },\r\n        );\r\n    }\r\n\r\n    public getLegalEntities(): void {\r\n        if (this._customLegalEntity) {\r\n            this._currentLegalEntity = this._customLegalEntity;\r\n            return;\r\n        }\r\n\r\n        this._userProfile = this.sessionService.userProfile;\r\n        if (this._userProfile) {\r\n            this._fullNameUser = `${this._userProfile.firstName} ${this._userProfile.lastName}`;\r\n\r\n            // for customers, all its legal entities are loaded on one api call.\r\n            if (this._userProfile.userType === 'C') {\r\n                this.getLegalEntitiesForCustomers();\r\n            } else {\r\n                this.searchLegalEntity(1, 1, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    public getMenuItems(): void {\r\n        // if custom items were not setted\r\n        if (!this._menuItems) {\r\n            this.sessionService.menuApplicationItems.subscribe(\r\n                (result: IApplicationMenu[]) => {\r\n                    this._menuItems = result;\r\n                },\r\n            );\r\n        }\r\n    }\r\n\r\n    public onApplicationItemClick(itemClicked: IApplicationMenu): void {\r\n        if (this._clickedApp !== itemClicked) {\r\n            this._clickedApp = itemClicked;\r\n        } else {\r\n            this._clickedApp = {} as IApplicationMenu;\r\n        }\r\n\r\n        if (!itemClicked.menu || (itemClicked.menu.menuItems.length === 0)) {\r\n            this.clickMenuOption.emit(itemClicked.applicationTitle);\r\n            this.isCollapsed = this._isMobilePhone ? !this.isCollapsed : this.isCollapsed;\r\n            if (this.shouldForceRouter(itemClicked.applicationUrl)) {\r\n                this.navigateTo(itemClicked.applicationUrl, NavigationType.Router);\r\n            } else {\r\n                this.navigateTo(itemClicked.applicationUrl, NavigationType.Redirect);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public onSubItemClick(subItem: IAppMenuItem): void {\r\n        if (this._clickedLink !== subItem) {\r\n            this._clickedLink = subItem;\r\n        }\r\n        this.clickMenuOption.emit(subItem.menuTitle);\r\n        this.isCollapsed = this._isMobilePhone ? !this._isCollapsed : this._isCollapsed;\r\n        const pathSubItem: any = this.getMainPath(subItem.menuEndpoint);\r\n        const isLocalHost: any = window.location.hostname.indexOf('localhost') > -1;\r\n        // to know if it's on other application do a redirect\r\n\r\n        if (this.getMainPath(window.location.pathname) === pathSubItem ||\r\n            isLocalHost ||\r\n            this.shouldForceRouter(subItem.menuEndpoint)) {\r\n            this.navigateTo(subItem.menuEndpoint, NavigationType.Router);\r\n        } else {\r\n            this.navigateTo(subItem.menuEndpoint, NavigationType.Redirect);\r\n        }\r\n    }\r\n\r\n    public shouldDisplayActiveMenu(menuToTest: IApplicationMenu, displayFlag: boolean): boolean {\r\n        const pathname: string = window.location.pathname;\r\n        // is the pathname me or is it my child?\r\n        const isItMe: boolean = pathname === menuToTest.applicationUrl;\r\n        const isItMyChild: boolean = menuToTest.menu.menuItems.findIndex(\r\n            (menuItem: any) => menuItem.menuEndpoint === pathname) !== -1 ? true : false;\r\n        return isItMe || isItMyChild || displayFlag;\r\n    }\r\n\r\n    public toggleSidebar(): void {\r\n        this.hiddenLegalEntity = false;\r\n        this.isCollapsed = !this.isCollapsed;\r\n        this._showLegalEntity = this.isCollapsed ? false : this._showLegalEntity;\r\n        this._languageMenuActive = false;\r\n        this._legalEntityMenuActive = false;\r\n    }\r\n\r\n    public getArrowIcon(): string {\r\n        return this._showLegalEntity ? '#icon-down-single' : '#icon-right-single';\r\n    }\r\n\r\n    public goToProfile(): void {\r\n        if (!this.disabledProfile) { window.location.href = '/profile'; }\r\n    }\r\n\r\n    public goToSettings(): void {\r\n        if (this.pathMobileLang) {\r\n            this.router.navigate([this.pathMobileLang]);\r\n        } else {\r\n            window.location.href = '/settings';\r\n        }\r\n    }\r\n\r\n    public signOut(): void {\r\n        this.sessionService.logout().subscribe(\r\n            (result: any) => {\r\n                if (!result.success) {\r\n                    console.error('An error ocurred before logout:', result.message);\r\n                }\r\n                window.location.href = '/';\r\n            });\r\n    }\r\n\r\n    public setLanguage(lang: ILanguageSelect): void {\r\n        this.translationService.setLanguage(lang.languageISO);\r\n        this.eventBroadcaster.broadcast(Broadcaster.DCM_LANGUAGE_CHANGE, lang.languageISO);\r\n    }\r\n\r\n    public getMainPath(path: string): string {\r\n        const arr: string[] = path.split('/');\r\n        return path.charAt(0) === '/' ? arr[1] : arr[0];\r\n    }\r\n\r\n    public handleError(error: Response | any): Observable<any> {\r\n        // in a real world app, we might use a remote logging infrastructure\r\n        let errMsg: string;\r\n        if (error instanceof Response) {\r\n            const body: any = error.json() || '';\r\n            const err: any = body.error || JSON.stringify(body);\r\n            errMsg = `${error.status} - ${error.statusText || ''}`;\r\n        } else {\r\n            errMsg = error.message ? error.message : error.toString();\r\n        }\r\n        console.error(error);\r\n        return Observable.throw(error);\r\n    }\r\n\r\n    public setCmxIcons(icon: string): string {\r\n        icon = (icon === 'icon-app-document-center' ? 'cmx-icon-module-document-center' : icon);\r\n        icon = (icon === 'cmx-icon-module-rccc' ? 'cmx-icon-logo' : icon);\r\n        icon = (icon === 'cmx-icon-module-localization' ? 'cmx-icon-pin-current-location' : icon);\r\n        icon = (icon === 'cmx-icon-module-parameters' ? 'cmx-icon-question' : icon);\r\n        return icon;\r\n    }\r\n\r\n    private navigateTo(menuEndpoint: string, type: NavigationType): void {\r\n        switch (type) {\r\n            case NavigationType.Redirect:\r\n                window.location.href = menuEndpoint;\r\n                console.log('do a redirect:', menuEndpoint);\r\n                break;\r\n            case NavigationType.Router:\r\n                this.router.navigate([menuEndpoint]);\r\n                console.log('router navigate to', menuEndpoint);\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    private shouldForceRouter(pathname: string): boolean {\r\n        if (this.forceRouterList.length > 0) {\r\n            const forcedRoutesRegExp: RegExp = new RegExp('/(' + this.forceRouterList.join('|') + ').*');\r\n            return !!pathname.match(forcedRoutesRegExp);\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    // tslint:disable-next-line:pipe-naming\r\n    name: 'filterLegalEntity',\r\n})\r\nexport class FilterLegalEntity implements PipeTransform {\r\n    public transform(items, searchValue: string): any {\r\n\r\n        const result = searchValue ? items.filter(\r\n            (item) => {\r\n                return item.legalEntityDesc.toLowerCase().indexOf(searchValue.toLowerCase()) > -1 ||\r\n                    item.legalEntityTypeCode.indexOf(searchValue) > -1;\r\n            },\r\n        ) : items;\r\n\r\n        return result;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\n\r\n// tslint:disable-next-line:pipe-naming\r\n@Pipe({name: 'replaceString'})\r\nexport class ReplaceStringPipe implements PipeTransform {\r\n    constructor(protected sanitizer: DomSanitizer) {}\r\n    public transform(wholeString: string, toReplace: string, replacedFor: string): SafeHtml {\r\n        return this.sanitizer.bypassSecurityTrustHtml(wholeString.replace(toReplace, replacedFor));\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    HostListener,\r\n    Output,\r\n} from '@angular/core';\r\n\r\n// tslint:disable-next-line\r\n@Directive({ selector: '[clickOutside]' })\r\nexport class ClickOutsideDirective {\r\n\r\n    @Output()\r\n    public clickOutside: any = new EventEmitter();\r\n\r\n    constructor(private _elementRef: ElementRef) { }\r\n\r\n    @HostListener('document:click', ['$event.target'])\r\n    public onClick(targetElement: any): void {\r\n        const clickedInside: boolean = this._elementRef.nativeElement.contains(targetElement);\r\n        if (!clickedInside) {\r\n            this.clickOutside.emit();\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\n\r\nimport { CmxRadioModule } from '@cemex/cmx-radio-v4';\r\nimport { CmxButtonModule} from '@cemex/cmx-button-v4';\r\nimport { CmxTooltipModule } from '@cemex/cmx-tooltip-v4';\r\n\r\nimport { CmxSidebarComponent } from './components/cmx-sidebar.component';\r\nimport { ReplaceStringPipe } from './components/replaceString.pipe';\r\nimport { ClickOutsideDirective } from './components/click-outside.directive';\r\nimport { FilterLegalEntity } from './components/cmx-filter-entity.pipe';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    FlexLayoutModule,\r\n    CmxRadioModule,\r\n    CmxButtonModule,\r\n    CmxTooltipModule,\r\n  ],\r\n  exports: [\r\n    CmxSidebarComponent,\r\n    FilterLegalEntity,\r\n    ReplaceStringPipe,\r\n  ],\r\n  declarations: [\r\n    CmxSidebarComponent,\r\n    FilterLegalEntity,\r\n    ClickOutsideDirective,\r\n    ReplaceStringPipe,\r\n  ],\r\n})\r\nexport class CmxSidebarModule { }\r\n"]}