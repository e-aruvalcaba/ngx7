/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, Host } from '@angular/core';
import { CmxTableComponent } from '../cmx-table/cmx-table.component';
export class CmxPaginationComponent {
    /**
     * @param {?} parent
     */
    constructor(parent) {
        this.parent = parent;
        this.pageChanged = new EventEmitter();
        this.beginning = [];
        this.end = [];
        this.state = 1;
        this.isRtl = false;
        this._currentPage = 1;
        this.range = 5;
        // strange shit that a delay is needed to set the value from the parent
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.isRtl = this.parent.rtl;
        }), 100);
    }
    /**
     * @param {?} $value
     * @return {?}
     */
    set pages($value) {
        if ($value !== undefined && $value !== null) {
            this._pages = $value;
            this.organizePages();
        }
    }
    /**
     * @return {?}
     */
    get pages() {
        return this._pages;
    }
    /**
     * @param {?} $value
     * @return {?}
     */
    set currentPage($value) {
        if ($value !== undefined && $value != null) {
            this._currentPage = $value;
            if (this._currentPage < this.range) {
                this.state = 1;
            }
            else if (this._currentPage >= this.range &&
                this._currentPage <= (this.pages - this.range)) {
                this.state = 2;
            }
            else if (this._currentPage > (this.pages - this.range)) {
                this.state = 3;
            }
        }
    }
    /**
     * @return {?}
     */
    get currentPage() {
        return this._currentPage;
    }
    /**
     * \@description Goes one page down from the current one.
     * @return {?}
     */
    previousPage() {
        /** @type {?} */
        const $calc = this.currentPage - 1;
        if ($calc > 0) {
            this.setPage($calc);
        }
    }
    /**
     * \@description Goes one page up from the current one.
     * @return {?}
     */
    nextPage() {
        /** @type {?} */
        const $calc = this.currentPage + 1;
        if ($calc <= this.pages) {
            this.setPage($calc);
        }
    }
    /**
     * \@description Check if the last page shortcut is shown
     * whether the first page is present or not.
     * @return {?} boolean
     */
    showFirstPageShortcut() {
        /** @type {?} */
        let $show = true;
        this.end.forEach((/**
         * @param {?} $page
         * @return {?}
         */
        ($page) => {
            if ($page === 1) {
                $show = false;
            }
        }));
        return $show && (this.state !== 1);
    }
    /**
     * \@description Check if the last page shortcut is shown
     * whether the last page is present or not.
     * @return {?} boolean
     */
    showLastPageShortcut() {
        /** @type {?} */
        let $show = true;
        this.beginning.forEach((/**
         * @param {?} $page
         * @return {?}
         */
        ($page) => {
            if ($page === this.pages) {
                $show = false;
            }
        }));
        return $show && (this.state !== 3);
    }
    /**
     * \@description Sets the current page from the user's click.
     * @param {?} $page
     * @return {?}
     */
    setPage($page) {
        this.currentPage = $page;
        if (this.currentPage < this.range) {
            this.state = 1;
        }
        else if (this.currentPage >= this.range &&
            this.currentPage <= (this.pages - this.range)) {
            this.state = 2;
        }
        else if (this.currentPage > (this.pages - this.range)) {
            this.state = 3;
        }
        this.pageChanged.emit(this.currentPage);
    }
    /**
     * @private
     * @return {?}
     */
    organizePages() {
        this.state = 1;
        this.currentPage = 1;
        this.beginning = [];
        this.end = [];
        /** @type {?} */
        let $i = 1;
        while ($i <= this.range && $i <= this.pages) {
            this.beginning.push($i);
            $i++;
        }
        $i = (this.pages - this.range);
        if ($i === 0) {
            $i++;
        }
        while ($i <= this.pages) {
            this.end.push($i);
            $i++;
        }
    }
}
CmxPaginationComponent.decorators = [
    { type: Component, args: [{
                selector: 'cmx-pagination',
                template: "<ul class=\"pagination\" [dir]=\"isRtl ? 'rtl':''\">\r\n    <ng-container *ngIf=\"currentPage !== 1\">\r\n        <li class=\"pagination-prev\">\r\n            <a (click)=\"previousPage()\">\r\n                <ng-container *ngIf=\"isRtl === false\">\r\n                    <svg id=\"icon-straight-arrow-left\" viewBox=\"0 0 6 10\" width=\"100%\" height=\"100%\">\r\n                        <title>icon-straight-arrow-left</title>\r\n                        <polygon class=\"icon-straight-arrow-left\" points=\"4.86 0 6 1.18 2.29 5 6 8.83 4.86 10 0 5 4.86 0\"></polygon>\r\n                    </svg>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"isRtl === true\">\r\n                    <svg id=\"icon-straight-arrow-right\" viewBox=\"0 0 6 10\" width=\"100%\" height=\"100%\">\r\n                        <title>icon-straight-arrow-right</title>\r\n                        <polygon class=\"icon-straight-arrow-right\" points=\"1.14 0 0 1.18 3.71 5 0 8.83 1.14 10 6 5 1.14 0\"></polygon>\r\n                    </svg>\r\n                </ng-container>\r\n            </a>\r\n        </li>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"showFirstPageShortcut()\">\r\n        <li>\r\n            <a (click)=\"setPage(1)\">\r\n                1\r\n            </a>\r\n        </li>\r\n        <li>\r\n            ...\r\n        </li>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"state === 1\">\r\n        <ng-container *ngFor=\"let $page of beginning;\">\r\n            <li>\r\n                <a [class.current]=\"$page === currentPage\" (click)=\"setPage($page)\">\r\n                    {{ $page }}\r\n                </a>\r\n            </li>    \r\n        </ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"state === 2\">\r\n        <li>\r\n            <a (click)=\"setPage(currentPage - 1)\">\r\n                {{ currentPage - 1 }}\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a class=\"current\" (click)=\"setPage(currentPage)\">\r\n                {{ currentPage }}\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a (click)=\"setPage(currentPage + 1)\">\r\n                {{ currentPage + 1 }}\r\n            </a>\r\n        </li>   \r\n    </ng-container>\r\n    <ng-container *ngIf=\"state === 3\">\r\n        <ng-container *ngFor=\"let $page of end;\">\r\n            <li>\r\n                <a [class.current]=\"$page === currentPage\" (click)=\"setPage($page)\">\r\n                    {{ $page }}\r\n                </a>\r\n            </li>      \r\n        </ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"showLastPageShortcut()\">\r\n        <li>\r\n            ...\r\n        </li>\r\n        <li>\r\n            <a (click)=\"setPage(pages)\">\r\n                {{ pages }}\r\n            </a>\r\n        </li>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"currentPage !== pages\">\r\n        <li class=\"pagination-next\">\r\n            <a (click)=\"nextPage()\">\r\n                <ng-container *ngIf=\"isRtl === false\">\r\n                    <svg id=\"icon-straight-arrow-right\" viewBox=\"0 0 6 10\" width=\"100%\" height=\"100%\">\r\n                        <title>icon-straight-arrow-right</title>\r\n                        <polygon class=\"icon-straight-arrow-right\" points=\"1.14 0 0 1.18 3.71 5 0 8.83 1.14 10 6 5 1.14 0\"></polygon>\r\n                    </svg>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"isRtl === true\">\r\n                    <svg id=\"icon-straight-arrow-left\" viewBox=\"0 0 6 10\" width=\"100%\" height=\"100%\">\r\n                        <title>icon-straight-arrow-left</title>\r\n                        <polygon class=\"icon-straight-arrow-left\" points=\"4.86 0 6 1.18 2.29 5 6 8.83 4.86 10 0 5 4.86 0\"></polygon>\r\n                    </svg>\r\n                </ng-container>\r\n            </a>\r\n        </li>\r\n    </ng-container>\r\n</ul>",
                styles: [".roboto-bold{font-weight:700}.roboto-medium{font-weight:500}.roboto-regular{font-weight:400}.roboto-light{font-weight:300}.roboto-thin{font-weight:100}.h1-role,h1{font-family:Roboto,sans-serif;font-size:3rem;line-height:3rem;font-weight:700;color:#001b3a}.h2-role,.h3-role,h2,h3{font-family:Roboto,sans-serif;font-size:1.625rem;line-height:2rem;font-weight:400;color:#001b3a}.h4-role,h4{font-family:Roboto,sans-serif;font-size:2rem;line-height:2rem;font-weight:500;color:#001b3a}.h5-role,h5{font-family:Roboto,sans-serif;font-size:1.25rem;line-height:1.5rem;font-weight:400;color:#001b3a}.h6-role,h6{font-family:Roboto,sans-serif;font-size:.875rem;line-height:1rem;font-weight:700;color:#001b3a;text-transform:uppercase}.table-entry{font-family:Roboto,sans-serif;font-size:.875rem;line-height:1rem}.table-entry-strong{font-family:Roboto,sans-serif;font-size:.875rem;line-height:1rem;color:#333;font-weight:700}.link,.table-entry,a{text-decoration:none;color:#3fa9f5}a:hover{text-decoration:underline}.input-placeholder{font-family:Roboto,sans-serif;font-size:.875rem;line-height:1rem;color:#666}.input-text{font-family:Roboto,sans-serif;font-size:.875rem;line-height:1rem;color:#333}.size-15{font-size:.9375rem}.size-24{font-size:1.5rem}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}.flex-first{order:-1}.flex-last{order:1}.flex-unordered{order:0}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{-ms-grid-row-align:auto!important;align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{-ms-grid-row-align:center!important;align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{-ms-grid-row-align:stretch!important;align-self:stretch!important}@media (min-width:576px){.text-xs-left{text-align:left!important}.text-xs-right{text-align:right!important}.text-xs-center{text-align:center!important}.flex-xs-first{order:-1}.flex-xs-last{order:1}.flex-xs-unordered{order:0}.flex-xs-row{flex-direction:row!important}.flex-xs-column{flex-direction:column!important}.flex-xs-row-reverse{flex-direction:row-reverse!important}.flex-xs-column-reverse{flex-direction:column-reverse!important}.flex-xs-wrap{flex-wrap:wrap!important}.flex-xs-nowrap{flex-wrap:nowrap!important}.flex-xs-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xs-start{justify-content:flex-start!important}.justify-content-xs-end{justify-content:flex-end!important}.justify-content-xs-center{justify-content:center!important}.justify-content-xs-between{justify-content:space-between!important}.justify-content-xs-around{justify-content:space-around!important}.align-items-xs-start{align-items:flex-start!important}.align-items-xs-end{align-items:flex-end!important}.align-items-xs-center{align-items:center!important}.align-items-xs-baseline{align-items:baseline!important}.align-items-xs-stretch{align-items:stretch!important}.align-content-xs-start{align-content:flex-start!important}.align-content-xs-end{align-content:flex-end!important}.align-content-xs-center{align-content:center!important}.align-content-xs-between{align-content:space-between!important}.align-content-xs-around{align-content:space-around!important}.align-content-xs-stretch{align-content:stretch!important}.align-self-xs-auto{-ms-grid-row-align:auto!important;align-self:auto!important}.align-self-xs-start{align-self:flex-start!important}.align-self-xs-end{align-self:flex-end!important}.align-self-xs-center{-ms-grid-row-align:center!important;align-self:center!important}.align-self-xs-baseline{align-self:baseline!important}.align-self-xs-stretch{-ms-grid-row-align:stretch!important;align-self:stretch!important}}@media (min-width:768px){.text-sm-left{text-align:left!important}.text-sm-right{text-align:right!important}.text-sm-center{text-align:center!important}.flex-sm-first{order:-1}.flex-sm-last{order:1}.flex-sm-unordered{order:0}.flex-sm-row{flex-direction:row!important}.flex-sm-column{flex-direction:column!important}.flex-sm-row-reverse{flex-direction:row-reverse!important}.flex-sm-column-reverse{flex-direction:column-reverse!important}.flex-sm-wrap{flex-wrap:wrap!important}.flex-sm-nowrap{flex-wrap:nowrap!important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-sm-start{justify-content:flex-start!important}.justify-content-sm-end{justify-content:flex-end!important}.justify-content-sm-center{justify-content:center!important}.justify-content-sm-between{justify-content:space-between!important}.justify-content-sm-around{justify-content:space-around!important}.align-items-sm-start{align-items:flex-start!important}.align-items-sm-end{align-items:flex-end!important}.align-items-sm-center{align-items:center!important}.align-items-sm-baseline{align-items:baseline!important}.align-items-sm-stretch{align-items:stretch!important}.align-content-sm-start{align-content:flex-start!important}.align-content-sm-end{align-content:flex-end!important}.align-content-sm-center{align-content:center!important}.align-content-sm-between{align-content:space-between!important}.align-content-sm-around{align-content:space-around!important}.align-content-sm-stretch{align-content:stretch!important}.align-self-sm-auto{-ms-grid-row-align:auto!important;align-self:auto!important}.align-self-sm-start{align-self:flex-start!important}.align-self-sm-end{align-self:flex-end!important}.align-self-sm-center{-ms-grid-row-align:center!important;align-self:center!important}.align-self-sm-baseline{align-self:baseline!important}.align-self-sm-stretch{-ms-grid-row-align:stretch!important;align-self:stretch!important}}@media (min-width:1080px){.text-md-left{text-align:left!important}.text-md-right{text-align:right!important}.text-md-center{text-align:center!important}.flex-md-first{order:-1}.flex-md-last{order:1}.flex-md-unordered{order:0}.flex-md-row{flex-direction:row!important}.flex-md-column{flex-direction:column!important}.flex-md-row-reverse{flex-direction:row-reverse!important}.flex-md-column-reverse{flex-direction:column-reverse!important}.flex-md-wrap{flex-wrap:wrap!important}.flex-md-nowrap{flex-wrap:nowrap!important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-md-start{justify-content:flex-start!important}.justify-content-md-end{justify-content:flex-end!important}.justify-content-md-center{justify-content:center!important}.justify-content-md-between{justify-content:space-between!important}.justify-content-md-around{justify-content:space-around!important}.align-items-md-start{align-items:flex-start!important}.align-items-md-end{align-items:flex-end!important}.align-items-md-center{align-items:center!important}.align-items-md-baseline{align-items:baseline!important}.align-items-md-stretch{align-items:stretch!important}.align-content-md-start{align-content:flex-start!important}.align-content-md-end{align-content:flex-end!important}.align-content-md-center{align-content:center!important}.align-content-md-between{align-content:space-between!important}.align-content-md-around{align-content:space-around!important}.align-content-md-stretch{align-content:stretch!important}.align-self-md-auto{-ms-grid-row-align:auto!important;align-self:auto!important}.align-self-md-start{align-self:flex-start!important}.align-self-md-end{align-self:flex-end!important}.align-self-md-center{-ms-grid-row-align:center!important;align-self:center!important}.align-self-md-baseline{align-self:baseline!important}.align-self-md-stretch{-ms-grid-row-align:stretch!important;align-self:stretch!important}}@media (min-width:1320px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}.flex-lg-first{order:-1}.flex-lg-last{order:1}.flex-lg-unordered{order:0}.flex-lg-row{flex-direction:row!important}.flex-lg-column{flex-direction:column!important}.flex-lg-row-reverse{flex-direction:row-reverse!important}.flex-lg-column-reverse{flex-direction:column-reverse!important}.flex-lg-wrap{flex-wrap:wrap!important}.flex-lg-nowrap{flex-wrap:nowrap!important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-lg-start{justify-content:flex-start!important}.justify-content-lg-end{justify-content:flex-end!important}.justify-content-lg-center{justify-content:center!important}.justify-content-lg-between{justify-content:space-between!important}.justify-content-lg-around{justify-content:space-around!important}.align-items-lg-start{align-items:flex-start!important}.align-items-lg-end{align-items:flex-end!important}.align-items-lg-center{align-items:center!important}.align-items-lg-baseline{align-items:baseline!important}.align-items-lg-stretch{align-items:stretch!important}.align-content-lg-start{align-content:flex-start!important}.align-content-lg-end{align-content:flex-end!important}.align-content-lg-center{align-content:center!important}.align-content-lg-between{align-content:space-between!important}.align-content-lg-around{align-content:space-around!important}.align-content-lg-stretch{align-content:stretch!important}.align-self-lg-auto{-ms-grid-row-align:auto!important;align-self:auto!important}.align-self-lg-start{align-self:flex-start!important}.align-self-lg-end{align-self:flex-end!important}.align-self-lg-center{-ms-grid-row-align:center!important;align-self:center!important}.align-self-lg-baseline{align-self:baseline!important}.align-self-lg-stretch{-ms-grid-row-align:stretch!important;align-self:stretch!important}}@media (min-width:1560px){.text-xlg-left{text-align:left!important}.text-xlg-right{text-align:right!important}.text-xlg-center{text-align:center!important}.flex-xlg-first{order:-1}.flex-xlg-last{order:1}.flex-xlg-unordered{order:0}.flex-xlg-row{flex-direction:row!important}.flex-xlg-column{flex-direction:column!important}.flex-xlg-row-reverse{flex-direction:row-reverse!important}.flex-xlg-column-reverse{flex-direction:column-reverse!important}.flex-xlg-wrap{flex-wrap:wrap!important}.flex-xlg-nowrap{flex-wrap:nowrap!important}.flex-xlg-wrap-reverse{flex-wrap:wrap-reverse!important}.justify-content-xlg-start{justify-content:flex-start!important}.justify-content-xlg-end{justify-content:flex-end!important}.justify-content-xlg-center{justify-content:center!important}.justify-content-xlg-between{justify-content:space-between!important}.justify-content-xlg-around{justify-content:space-around!important}.align-items-xlg-start{align-items:flex-start!important}.align-items-xlg-end{align-items:flex-end!important}.align-items-xlg-center{align-items:center!important}.align-items-xlg-baseline{align-items:baseline!important}.align-items-xlg-stretch{align-items:stretch!important}.align-content-xlg-start{align-content:flex-start!important}.align-content-xlg-end{align-content:flex-end!important}.align-content-xlg-center{align-content:center!important}.align-content-xlg-between{align-content:space-between!important}.align-content-xlg-around{align-content:space-around!important}.align-content-xlg-stretch{align-content:stretch!important}.align-self-xlg-auto{-ms-grid-row-align:auto!important;align-self:auto!important}.align-self-xlg-start{align-self:flex-start!important}.align-self-xlg-end{align-self:flex-end!important}.align-self-xlg-center{-ms-grid-row-align:center!important;align-self:center!important}.align-self-xlg-baseline{align-self:baseline!important}.align-self-xlg-stretch{-ms-grid-row-align:stretch!important;align-self:stretch!important}}.pagination{display:inline-block;list-style:none;padding:0;margin:0}.pagination li{margin:0 8px;float:left}.pagination li a{cursor:pointer;font-size:.875rem;line-height:22px;width:24px;height:24px;display:inline-block;color:#5c6570;float:left;text-decoration:none;border-radius:2px;text-align:center;border:1px solid transparent}.pagination li a.hover,.pagination li a:hover{border:1px solid #3fa9f5}.pagination li a.current{color:#fff;background:#3fa9f5}.pagination li svg{width:8px;height:12px;fill:#3fa9f5;transition:.25s}.pagination .pagination-next.hide,.pagination .pagination-prev.hide{display:none}.pagination .pagination-next.hover a,.pagination .pagination-next:hover a,.pagination .pagination-prev.hover a,.pagination .pagination-prev:hover a{border:0}.pagination .pagination-next.hover a svg,.pagination .pagination-next:hover a svg,.pagination .pagination-prev.hover a svg,.pagination .pagination-prev:hover a svg{width:16px;height:20px;fill:#3fa9f5}.pagination[dir=rtl] li{float:right}"]
            }] }
];
/** @nocollapse */
CmxPaginationComponent.ctorParameters = () => [
    { type: CmxTableComponent, decorators: [{ type: Host }] }
];
CmxPaginationComponent.propDecorators = {
    pages: [{ type: Input }],
    currentPage: [{ type: Input }],
    pageChanged: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    CmxPaginationComponent.prototype.pageChanged;
    /** @type {?} */
    CmxPaginationComponent.prototype.beginning;
    /** @type {?} */
    CmxPaginationComponent.prototype.end;
    /** @type {?} */
    CmxPaginationComponent.prototype.state;
    /** @type {?} */
    CmxPaginationComponent.prototype.isRtl;
    /**
     * @type {?}
     * @private
     */
    CmxPaginationComponent.prototype._pages;
    /**
     * @type {?}
     * @private
     */
    CmxPaginationComponent.prototype._currentPage;
    /**
     * @type {?}
     * @private
     */
    CmxPaginationComponent.prototype.range;
    /**
     * @type {?}
     * @private
     */
    CmxPaginationComponent.prototype.parent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY214LXBhZ2luYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGNlbWV4L2NteC10YWJsZS12Ny8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2NteC1wYWdpbmF0aW9uL2NteC1wYWdpbmF0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFN0UsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFPckUsTUFBTSxPQUFPLHNCQUFzQjs7OztJQXdDL0IsWUFBNEIsTUFBeUI7UUFBekIsV0FBTSxHQUFOLE1BQU0sQ0FBbUI7UUFWcEMsZ0JBQVcsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUV6RSxjQUFTLEdBQWEsRUFBRSxDQUFDO1FBQ3pCLFFBQUcsR0FBYSxFQUFFLENBQUM7UUFDbkIsVUFBSyxHQUFHLENBQUMsQ0FBQztRQUNWLFVBQUssR0FBRyxLQUFLLENBQUM7UUFFYixpQkFBWSxHQUFHLENBQUMsQ0FBQztRQUNqQixVQUFLLEdBQUcsQ0FBQyxDQUFDO1FBR2QsdUVBQXVFO1FBQ3ZFLFVBQVU7OztRQUFDLEdBQUcsRUFBRTtZQUNaLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDakMsQ0FBQyxHQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ1osQ0FBQzs7Ozs7SUE1Q0QsSUFDSSxLQUFLLENBQUMsTUFBYztRQUNwQixJQUFJLE1BQU0sS0FBSyxTQUFTLElBQUksTUFBTSxLQUFLLElBQUksRUFBRTtZQUN6QyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUNyQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDeEI7SUFDTCxDQUFDOzs7O0lBQ0QsSUFBSSxLQUFLO1FB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Q0FBcUI7Ozs7O0lBQ3JCLHdDQUF1Qjs7Ozs7SUFDdkIsOENBQXlCOzs7OztJQUN6Qix1Q0FBa0I7Ozs7O0lBRU4sd0NBQXlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEhvc3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IENteFRhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi4vY214LXRhYmxlL2NteC10YWJsZS5jb21wb25lbnQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2NteC1wYWdpbmF0aW9uJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9jbXgtcGFnaW5hdGlvbi5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsgJy4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc2Nzcy9jbXgtdGFibGUvdjEvY214LXBhZ2luYXRpb24uY29tcG9uZW50LnNjc3MnIF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDbXhQYWdpbmF0aW9uQ29tcG9uZW50IHtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgcGFnZXMoJHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAoJHZhbHVlICE9PSB1bmRlZmluZWQgJiYgJHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VzID0gJHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLm9yZ2FuaXplUGFnZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgcGFnZXMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFnZXM7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBjdXJyZW50UGFnZSgkdmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICgkdmFsdWUgIT09IHVuZGVmaW5lZCAmJiAkdmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50UGFnZSA9ICR2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQYWdlIDwgdGhpcy5yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fY3VycmVudFBhZ2UgPj0gdGhpcy5yYW5nZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50UGFnZSA8PSAodGhpcy5wYWdlcyAtIHRoaXMucmFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gMjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9jdXJyZW50UGFnZSA+ICh0aGlzLnBhZ2VzIC0gdGhpcy5yYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGN1cnJlbnRQYWdlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRQYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIEBPdXRwdXQoKSBwdWJsaWMgcGFnZUNoYW5nZWQ6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcblxyXG4gICAgcHVibGljIGJlZ2lubmluZzogbnVtYmVyW10gPSBbXTtcclxuICAgIHB1YmxpYyBlbmQ6IG51bWJlcltdID0gW107XHJcbiAgICBwdWJsaWMgc3RhdGUgPSAxO1xyXG4gICAgcHVibGljIGlzUnRsID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9wYWdlczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfY3VycmVudFBhZ2UgPSAxO1xyXG4gICAgcHJpdmF0ZSByYW5nZSA9IDU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoQEhvc3QoKSBwcml2YXRlIHBhcmVudDogQ214VGFibGVDb21wb25lbnQpIHtcclxuICAgICAgICAvLyBzdHJhbmdlIHNoaXQgdGhhdCBhIGRlbGF5IGlzIG5lZWRlZCB0byBzZXQgdGhlIHZhbHVlIGZyb20gdGhlIHBhcmVudFxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzUnRsID0gdGhpcy5wYXJlbnQucnRsO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gR29lcyBvbmUgcGFnZSBkb3duIGZyb20gdGhlIGN1cnJlbnQgb25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJldmlvdXNQYWdlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0ICRjYWxjOiBudW1iZXIgPSB0aGlzLmN1cnJlbnRQYWdlIC0gMTtcclxuICAgICAgICBpZiAoJGNhbGMgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGFnZSgkY2FsYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIEdvZXMgb25lIHBhZ2UgdXAgZnJvbSB0aGUgY3VycmVudCBvbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBuZXh0UGFnZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCAkY2FsYzogbnVtYmVyID0gdGhpcy5jdXJyZW50UGFnZSArIDE7XHJcbiAgICAgICAgaWYgKCRjYWxjIDw9IHRoaXMucGFnZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQYWdlKCRjYWxjKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gQ2hlY2sgaWYgdGhlIGxhc3QgcGFnZSBzaG9ydGN1dCBpcyBzaG93blxyXG4gICAgICogd2hldGhlciB0aGUgZmlyc3QgcGFnZSBpcyBwcmVzZW50IG9yIG5vdC5cclxuICAgICAqIEByZXR1cm5zIGJvb2xlYW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNob3dGaXJzdFBhZ2VTaG9ydGN1dCgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgJHNob3cgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZW5kLmZvckVhY2goKCRwYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgkcGFnZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgJHNob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkc2hvdyAmJiAodGhpcy5zdGF0ZSAhPT0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gQ2hlY2sgaWYgdGhlIGxhc3QgcGFnZSBzaG9ydGN1dCBpcyBzaG93blxyXG4gICAgICogd2hldGhlciB0aGUgbGFzdCBwYWdlIGlzIHByZXNlbnQgb3Igbm90LlxyXG4gICAgICogQHJldHVybnMgYm9vbGVhblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2hvd0xhc3RQYWdlU2hvcnRjdXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0ICRzaG93ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmJlZ2lubmluZy5mb3JFYWNoKCgkcGFnZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoJHBhZ2UgPT09IHRoaXMucGFnZXMpIHtcclxuICAgICAgICAgICAgICAgICRzaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gJHNob3cgJiYgKHRoaXMuc3RhdGUgIT09IDMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIFNldHMgdGhlIGN1cnJlbnQgcGFnZSBmcm9tIHRoZSB1c2VyJ3MgY2xpY2suXHJcbiAgICAgKiBAcGFyYW0gbnVtYmVyICRwYWdlIFRoZSBudW1iZXIgb2YgdGhlIHBhZ2UgY2xpY2tlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBhZ2UoJHBhZ2U6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAkcGFnZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IHRoaXMucmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDE7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRQYWdlID49IHRoaXMucmFuZ2UgJiZcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlIDw9ICh0aGlzLnBhZ2VzIC0gdGhpcy5yYW5nZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRQYWdlID4gKHRoaXMucGFnZXMgLSB0aGlzLnJhbmdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wYWdlQ2hhbmdlZC5lbWl0KHRoaXMuY3VycmVudFBhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3JnYW5pemVQYWdlcygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gMTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTtcclxuICAgICAgICB0aGlzLmJlZ2lubmluZyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZW5kID0gW107XHJcbiAgICAgICAgbGV0ICRpID0gMTtcclxuICAgICAgICB3aGlsZSAoJGkgPD0gdGhpcy5yYW5nZSAmJiAkaSA8PSB0aGlzLnBhZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5uaW5nLnB1c2goJGkpO1xyXG4gICAgICAgICAgICAkaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkaSA9ICh0aGlzLnBhZ2VzIC0gdGhpcy5yYW5nZSk7XHJcbiAgICAgICAgaWYgKCRpID09PSAwKSB7XHJcbiAgICAgICAgICAgICRpKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICgkaSA8PSB0aGlzLnBhZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kLnB1c2goJGkpO1xyXG4gICAgICAgICAgICAkaSsrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=