*** Settings ***
 Documentation  Cmx-datepicker test for its use with robotframework.
 Library    Selenium2Library

*** Variables ***
 ${DATEPICKER_SUN_BUTTON}   xpath://*[@id="datepicker"]/div/div[2]/table/tbody/tr[3]/td[1]/button
 ${DATEPICKER_MON_TD}   xpath://*[@id="datepicker"]/div/div[2]/table/tbody/tr[3]/td[2]
 ${DATEPICKER_TUE_BUTTON}   xpath://*[@id="datepicker"]/div/div[2]/table/tbody/tr[3]/td[3]/button
 ${DATEPICKER_APPLY_BUTTON}    xpath://*[@id="datepicker"]/div/div[3]/div/button[2]
 ${DATEPICKER_MONTH_BUTTON}    xpath://*[@id="datepicker"]/div/div[1]/div/button[1]
 ${DATEPICKER_YEAR_BUTTON}    xpath://*[@id="datepicker"]/div/div[1]/div/button[2]
 ${DATEPICKER_MAY_BUTTON}    xpath://*[@id="datepicker"]/month-selector/div/div[2]/table/tbody/tr[2]/td[2]/button
 ${DATEPICKER_2015_BUTTON}    xpath://*[@id="datepicker"]/year-selector/div/div[2]/table/tbody/tr[2]/td[2]/button
 ${MINMAX_LEFT_ARROW}    xpath://*[@id="datepickerMinMax"]/div/div[1]/button[1]
 ${MINMAX_RIGHT_ARROW}    xpath://*[@id="datepickerMinMax"]/div/div[1]/button[2]
 ${MINMAX_DATEPICKER}    id:datepickerMinMax
 ${BROWSER}    chrome
 ${URL}    http://localhost:8000 

*** Test Cases ***
 datepicker single date test case
  [Documentation]    Selecting a single date in a cmx-datepicker element
  Open browser    ${URL}    ${BROWSER}
Apply button is disabled
  Element Should Be Disabled    ${DATEPICKER_APPLY_BUTTON}
Click day
  Click Element     ${DATEPICKER_SUN_BUTTON}
Day is active
  Wait until page contains element  ${DATEPICKER_SUN_BUTTON}[contains(@class, 'active')]
Apply button is enabled
  Element Should Be Enabled     ${DATEPICKER_APPLY_BUTTON}

 datepicker range test case
  [Documentation]    Selecting a range in a cmx-datepicker element
  Reload Page
Apply button is disabled
  Element Should Be Disabled    ${DATEPICKER_APPLY_BUTTON}
Click first day
  Click Element     ${DATEPICKER_SUN_BUTTON}
First day is active
  Wait until page contains element  ${DATEPICKER_SUN_BUTTON}[contains(@class, 'active')]
Click second day
  Click Element     ${DATEPICKER_TUE_BUTTON}
Middle days are in-range
  Wait until page contains element  ${DATEPICKER_MON_TD}[contains(@class, 'cmx-in-range')]
Second day is active
  Wait until page contains element  ${DATEPICKER_TUE_BUTTON}[contains(@class, 'active')]
Apply button is enabled
  Element Should Be Enabled     ${DATEPICKER_APPLY_BUTTON}

 datepicker min-max test case
  [Documentation]    Unable to select date out of min-max range
  Set Focus To Element    ${MINMAX_DATEPICKER}
Previous month arrow should be disabled
  Element Should Be Disabled    ${MINMAX_LEFT_ARROW}
Next month arrow should be disabled
  Element Should Be Disabled    ${MINMAX_RIGHT_ARROW}

 datepicker change month and year test case
  [Documentation]    Selecting a new month and new year in a cmx-datepicker element
  Reload Page
Click month
  Click Element    ${DATEPICKER_MONTH_BUTTON}
Click May
  Click Element    ${DATEPICKER_MAY_BUTTON}
Month is May
  Element Text Should Be    ${DATEPICKER_MONTH_BUTTON}    May
Click year
  Click Element    ${DATEPICKER_YEAR_BUTTON}
Click 2015
  Click Element    ${DATEPICKER_2015_BUTTON}
Year is 2015
  Element Text Should Be    ${DATEPICKER_YEAR_BUTTON}    2015
  Close Browser