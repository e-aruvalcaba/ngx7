/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var CountlyService = /** @class */ (function () {
    function CountlyService() {
        this.defaultTrackings = [
            ['track_pageview'],
            ['track_clicks'],
            ['track_errors'],
            ['track_links'],
            ['track_forms'],
            ['collect_from_forms'] /*['track_sessions'] */
        ];
        this.Countly = ((/** @type {?} */ (window))).Countly;
    }
    /**
     * @return {?}
     */
    CountlyService.prototype.init = /**
     * @return {?}
     */
    function () {
        this.addTracking('track_sessions');
        this.Countly.init();
    };
    /**
     * @param {?} flag
     * @return {?}
     */
    CountlyService.prototype.debug = /**
     * @param {?} flag
     * @return {?}
     */
    function (flag) {
        this.Countly.debug = flag;
    };
    /**
     * @param {?} url
     * @param {?} appKey
     * @return {?}
     */
    CountlyService.prototype.startService = /**
     * @param {?} url
     * @param {?} appKey
     * @return {?}
     */
    function (url, appKey) {
        if (this.Countly !== undefined) {
            this.Countly.url = url;
            this.Countly.app_key = appKey;
            this.Countly.q = this.defaultTrackings;
        }
    };
    /**
     * @param {?} key
     * @param {?=} value
     * @return {?}
     */
    CountlyService.prototype.addTracking = /**
     * @param {?} key
     * @param {?=} value
     * @return {?}
     */
    function (key, value) {
        if (!value) {
            this.Countly.q.push([key]);
        }
        else {
            this.Countly.q.push([key, value]);
        }
    };
    /**
     * @param {?} key
     * @return {?}
     */
    CountlyService.prototype.addTrackingPage = /**
     * @param {?} key
     * @return {?}
     */
    function (key) {
        this.Countly.q.push(['track_pageview', key]);
    };
    /**
     * @param {?} countryCode
     * @param {?} newId
     * @return {?}
     */
    CountlyService.prototype.changeId = /**
     * @param {?} countryCode
     * @param {?} newId
     * @return {?}
     */
    function (countryCode, newId) {
        this.Countly.q.push(['change_id', countryCode + newId]);
    };
    /**
     * @param {?} userfields
     * @return {?}
     */
    CountlyService.prototype.identifyUser = /**
     * @param {?} userfields
     * @return {?}
     */
    function (userfields) {
        this.Countly.q.push(['user_details', userfields]);
    };
    /**
     * @return {?}
     */
    CountlyService.prototype.endSession = /**
     * @return {?}
     */
    function () {
        this.Countly.q.push(['end_session']);
    };
    /**
     * @param {?} trackingjson
     * @return {?}
     */
    CountlyService.prototype.removeTracking = /**
     * @param {?} trackingjson
     * @return {?}
     */
    function (trackingjson) {
        this.Countly.q.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            if (element.indexOf(trackingjson) !== -1) {
                element[0] = 'canceled';
            }
        }));
    };
    return CountlyService;
}());
export { CountlyService };
if (false) {
    /** @type {?} */
    CountlyService.prototype.defaultTrackings;
    /** @type {?} */
    CountlyService.prototype.Countly;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY291bnRseS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGNlbWV4LWNvcmUvYW5ndWxhci1zZXJ2aWNlcy12Ny8iLCJzb3VyY2VzIjpbImxpYi9hbmFseXRpY3MvY291bnRseS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQTtJQVdFO1FBVk8scUJBQWdCLEdBQVE7WUFDN0IsQ0FBQyxnQkFBZ0IsQ0FBQztZQUNsQixDQUFDLGNBQWMsQ0FBQztZQUNoQixDQUFDLGNBQWMsQ0FBQztZQUNoQixDQUFDLGFBQWEsQ0FBQztZQUNmLENBQUMsYUFBYSxDQUFDO1lBQ2YsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLHVCQUF1QjtTQUMvQyxDQUFDO1FBSUEsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLG1CQUFBLE1BQU0sRUFBTyxDQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3pDLENBQUM7Ozs7SUFFTSw2QkFBSTs7O0lBQVg7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN0QixDQUFDOzs7OztJQUVNLDhCQUFLOzs7O0lBQVosVUFBYSxJQUFhO1FBQ3hCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUM1QixDQUFDOzs7Ozs7SUFFTSxxQ0FBWTs7Ozs7SUFBbkIsVUFBb0IsR0FBVyxFQUFFLE1BQWM7UUFDN0MsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFNBQVMsRUFBRTtZQUM5QixJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQzlCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztTQUN4QztJQUNILENBQUM7Ozs7OztJQUVNLG9DQUFXOzs7OztJQUFsQixVQUFtQixHQUFXLEVBQUUsS0FBVztRQUN6QyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUM1QjthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7U0FDbkM7SUFDSCxDQUFDOzs7OztJQUVNLHdDQUFlOzs7O0lBQXRCLFVBQXVCLEdBQVc7UUFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDOzs7Ozs7SUFFTSxpQ0FBUTs7Ozs7SUFBZixVQUFnQixXQUFtQixFQUFFLEtBQWE7UUFDaEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzFELENBQUM7Ozs7O0lBRU0scUNBQVk7Ozs7SUFBbkIsVUFBb0IsVUFBZTtRQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUNwRCxDQUFDOzs7O0lBRU0sbUNBQVU7OztJQUFqQjtRQUNFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQzs7Ozs7SUFFTSx1Q0FBYzs7OztJQUFyQixVQUFzQixZQUFpQjtRQUNyQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQSxPQUFPO1lBQzVCLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtnQkFDeEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQzthQUN6QjtRQUNILENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQztJQUNILHFCQUFDO0FBQUQsQ0FBQyxBQS9ERCxJQStEQzs7OztJQTlEQywwQ0FPRTs7SUFFRixpQ0FBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQW5hbHl0aWNzU2VydmljZSB9IGZyb20gJy4vaWFuYWx5dGljcy5pbnRlcmZhY2UnO1xuXG5leHBvcnQgY2xhc3MgQ291bnRseVNlcnZpY2UgaW1wbGVtZW50cyBJQW5hbHl0aWNzU2VydmljZSB7XG4gIHB1YmxpYyBkZWZhdWx0VHJhY2tpbmdzOiBhbnkgPSBbXG4gICAgWyd0cmFja19wYWdldmlldyddLFxuICAgIFsndHJhY2tfY2xpY2tzJ10sXG4gICAgWyd0cmFja19lcnJvcnMnXSxcbiAgICBbJ3RyYWNrX2xpbmtzJ10sXG4gICAgWyd0cmFja19mb3JtcyddLFxuICAgIFsnY29sbGVjdF9mcm9tX2Zvcm1zJ10gLypbJ3RyYWNrX3Nlc3Npb25zJ10gKi9cbiAgXTtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbiAgcHVibGljIENvdW50bHk6IGFueTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Db3VudGx5ID0gKHdpbmRvdyBhcyBhbnkpLkNvdW50bHk7XG4gIH1cblxuICBwdWJsaWMgaW5pdCgpIHtcbiAgICB0aGlzLmFkZFRyYWNraW5nKCd0cmFja19zZXNzaW9ucycpO1xuICAgIHRoaXMuQ291bnRseS5pbml0KCk7XG4gIH1cblxuICBwdWJsaWMgZGVidWcoZmxhZzogYm9vbGVhbikge1xuICAgIHRoaXMuQ291bnRseS5kZWJ1ZyA9IGZsYWc7XG4gIH1cblxuICBwdWJsaWMgc3RhcnRTZXJ2aWNlKHVybDogc3RyaW5nLCBhcHBLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLkNvdW50bHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5Db3VudGx5LnVybCA9IHVybDtcbiAgICAgIHRoaXMuQ291bnRseS5hcHBfa2V5ID0gYXBwS2V5O1xuICAgICAgdGhpcy5Db3VudGx5LnEgPSB0aGlzLmRlZmF1bHRUcmFja2luZ3M7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFkZFRyYWNraW5nKGtleTogc3RyaW5nLCB2YWx1ZT86IGFueSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRoaXMuQ291bnRseS5xLnB1c2goW2tleV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLkNvdW50bHkucS5wdXNoKFtrZXksIHZhbHVlXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFkZFRyYWNraW5nUGFnZShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuQ291bnRseS5xLnB1c2goWyd0cmFja19wYWdldmlldycsIGtleV0pO1xuICB9XG5cbiAgcHVibGljIGNoYW5nZUlkKGNvdW50cnlDb2RlOiBzdHJpbmcsIG5ld0lkOiBzdHJpbmcpIHtcbiAgICB0aGlzLkNvdW50bHkucS5wdXNoKFsnY2hhbmdlX2lkJywgY291bnRyeUNvZGUgKyBuZXdJZF0pO1xuICB9XG5cbiAgcHVibGljIGlkZW50aWZ5VXNlcih1c2VyZmllbGRzOiBhbnkpIHtcbiAgICB0aGlzLkNvdW50bHkucS5wdXNoKFsndXNlcl9kZXRhaWxzJywgdXNlcmZpZWxkc10pO1xuICB9XG5cbiAgcHVibGljIGVuZFNlc3Npb24oKSB7XG4gICAgdGhpcy5Db3VudGx5LnEucHVzaChbJ2VuZF9zZXNzaW9uJ10pO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZVRyYWNraW5nKHRyYWNraW5nanNvbjogYW55KSB7XG4gICAgdGhpcy5Db3VudGx5LnEuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmIChlbGVtZW50LmluZGV4T2YodHJhY2tpbmdqc29uKSAhPT0gLTEpIHtcbiAgICAgICAgZWxlbWVudFswXSA9ICdjYW5jZWxlZCc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==