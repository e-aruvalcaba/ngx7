!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("moment"),require("@angular/common/http"),require("@angular/common"),require("rxjs"),require("@angular/core")):"function"==typeof define&&define.amd?define("@cemex-core/angular-localization-v7",["exports","moment","@angular/common/http","@angular/common","rxjs","@angular/core"],t):t((e["cemex-core"]=e["cemex-core"]||{},e["cemex-core"]["angular-localization-v7"]={}),e.moment_,e.ng.common.http,e.ng.common,e.rxjs,e.ng.core)}(this,function(e,t,r,n,o,a){"use strict";var i=(c.prototype.getTranslations=function(e){var t="/translate/translate/"+this.productPath+"/"+e;return this.httpClient.get(t)},c.prototype.getLanguages=function(){return this.languagesSubject.asObservable()},c.prototype.getSelectedLanguage=function(){return this.selectedLanguageSubject.asObservable()},c.prototype.pt=function(e){var t=c.translations[e];return t&&t!==undefined?t:"NOT:"+e},c.prototype.getLabel=function(e){var t=c.translations[e];return t&&t!==undefined?t:"NOT:"+e},c.prototype.getLanguage=function(t){if(t===undefined||null===t)return console.warn("$languageIso param is undefined."),this.getDefaultLanguage();var e=void 0;return(e=c.languages.find(function(e){return e.languageISO===t||e.countryCode.toLowerCase()===t.toLowerCase()||e.languageISO.includes(t)}))===undefined&&(console.warn("The Language cannot reached",t),e=this.getDefaultLanguage()),e.momentConfig=this.getMomentConfig(e),e},c.prototype.getLanguageByCountryCode=function(t){if(t===undefined||null===t)return console.warn("$countryCode param is undefined."),this.getDefaultLanguage();var e=void 0,r=c.languages.filter(function(e){return e.countryCode.toLowerCase()===t.toLowerCase()});if(1<r.length){var n=sessionStorage.getItem("language");e=r.find(function(e){return e.languageISO.toLowerCase()===n.toLowerCase()})}else e=r&&0<r.length?r[0]:undefined;return e===undefined&&(console.warn("The Language cannot reached",t),e=this.getDefaultLanguage()),e.momentConfig=this.getMomentConfig(e),e},c.prototype.setLanguage=function(e){var t,r,n=this;this.selectedLanguage=this.getLanguage(e);try{for(var a=function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(c.languages),o=a.next();!o.done;o=a.next()){var i=o.value;i.isSelected=i.languageISO===this.selectedLanguage.languageISO,i.dir="right"===i.textFloat?"rtl":"ltr",i.rtl="rtl"===i.dir}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=a["return"])&&r.call(a)}finally{if(t)throw t.error}}this.getTranslations(this.selectedLanguage.languageISO).subscribe(function(e){return n.populateTranslation(e)})},c.prototype.populateTranslation=function(e){c.translations=e,localStorage.setItem("language",this.selectedLanguage.languageISO),sessionStorage.setItem("language",this.selectedLanguage.languageISO),this.languageLoaded.next(!0),this.selectedLanguageSubject.next(this.selectedLanguage),this.languagesSubject.next(c.languages)},Object.defineProperty(c.prototype,"selectedLanguage",{get:function(){return c.currentLanguage},set:function(e){c.currentLanguage=e},enumerable:!0,configurable:!0}),c.prototype.getDefaultLanguage=function(){var e,t=this;return(e=c.languages.find(function(e){return e.languageISO===t.defaultLanguageISO||e.countryCode.toLowerCase()===t.defaultLanguageISO.toLowerCase()||e.languageISO.includes(t.defaultLanguageISO)}))===undefined?(console.warn("The Default Language cannot reached",this.defaultLanguageISO),e=c.languages[0],console.warn("Trying get the first language",e.languageISO)):console.warn("The Default Language is",e.languageISO),e},c.prototype.getLanguagesByCountryCode=function(t){return c.languages.filter(function(e){return e.countryCode.toLowerCase()===t.toLowerCase()})},c.prototype.getMomentConfig=function(e){return{months:e.monthNames.split(","),monthsShort:e.shortDayMonths.split(","),weekdays:e.dayNames.split(","),weekdaysMin:e.shortDayNames2.split(","),weekdaysShort:e.shortDayNames.split(",")}},c.TRANSLATION_PRODUCT_PATH="TRANSLATION_PRODUCT_PATH",c.TRANSLATION_LANGUAGES="TRANSLATION_LANGUAGES",c.DEFAULT_LANGUAGE_ISO="DEFAULT_LANGUAGE_ISO",c.currentLanguage=undefined,c.translations={},c.languages=[],c.decorators=[{type:a.Injectable}],c.ctorParameters=function(){return[{type:r.HttpClient},{type:String,decorators:[{type:a.Inject,args:[c.TRANSLATION_PRODUCT_PATH]},{type:a.Optional}]},{type:undefined,decorators:[{type:a.Inject,args:[c.TRANSLATION_LANGUAGES]},{type:a.Optional}]},{type:undefined,decorators:[{type:a.Inject,args:[c.DEFAULT_LANGUAGE_ISO]},{type:a.Optional}]}]},c);function c(e,t,r,n){if(this.httpClient=e,this.productPath=t,this.loadedLanguages=r,this.defaultLanguageISO=n,this.languageLoaded=new o.ReplaySubject(1),this.selectedLanguageSubject=new o.ReplaySubject(1),this.languagesSubject=new o.ReplaySubject(1),!this.loadedLanguages)return console.warn("The Translation Service can't init without Injected Languages."),void console.warn("Inject the languages from your application: > { provide: 'TRANSLATION_LANGUAGES, useValue: window['CMX_LANGUAGES'] },'");n||console.warn("The Translation Service need defaultLanguageISO."),c.languages=this.loadedLanguages;var a=global.localStorage.getItem("language");0===Object.keys(c.translations).length?this.setLanguage(a||n):this.languageLoaded.next(!0)}function h(e){return Array.isArray(e)?e:String(e).split(/[eE]/)}function g(e){var t=h(e);if(!function d(e){var t=h(e);return!Number.isNaN(Number(t[1]))}(t))return t[0];var r="-"===t[0][0]?"-":"",n=t[0].replace(/^-/,"").split("."),a=n[0],o=n[1]||"",i=Number(t[1]);if(0===i)return r+a+"."+o;if(i<0){var u=a.length+i;if(0<u)return r+a.substr(0,u)+"."+a.substr(u)+o;var s="0.";for(i+=1;i;)s+="0",i+=1;return r+s+a+o}var c=o.length-i;if(0<c){var l=o.substr(i);return r+a+o.substr(0,i)+"."+l}var g=-c;for(s="";g;)s+="0",g-=1;return r+a+o+s}var u=t,s={ConvertToLocal:0,NoConvertToLocal:1};s[s.ConvertToLocal]="ConvertToLocal",s[s.NoConvertToLocal]="NoConvertToLocal";var l=(d.prototype.getDateObject=function(e){try{var t=e.replace(/-g/,"/").split(/\D/),r=parseInt(t[1],undefined)-1;return 3===t.length?new Date(t[0],r,t[2]):new Date(t[0],r,t[2],t[3],t[4],t[5])}catch(n){return undefined}},d.prototype.formatDateTimeMoment=function(e,t,r,n){return void 0===n&&(n=s.ConvertToLocal),i.currentLanguage&&u.updateLocale(i.currentLanguage.languageISO.substr(0,2),i.currentLanguage.momentConfig),n===s.NoConvertToLocal?u(e).locale(t.substr(0,2)).format(r):this.utcToLocal(e).locale(t.substr(0,2)).format(r)},d.prototype.formatNumberTS=function(e,t,r){return isNaN(e)||null===e?0:Number(this.round(e,r).toFixed(r)).toLocaleString(t+"-u-nu-latn",{minimumFractionDigits:e%1==0?0:r})},d.prototype.utcToLocal=function(e){return u.utc(e).local()},d.prototype.localToUtc=function(e,t){return t!==undefined?u(e,"YYYY-MM-DD THH:mm:ssZ").utc().format(t):u(e,"YYYY-MM-DD THH:mm:ssZ").utc().format()},d.prototype.timeToMinutes=function(e){var t=e.split(":"),r=+t[0],n=+t[1],a=+t[2];return 60*r+n+this.roundToDown(a/60)},d.prototype.formatNumber=function(e,t,n,a){if(e==undefined||""==e.toString()||isNaN(e))return console.warn("Not a valid number to format"),"";t=t!=undefined?t:2,n=n!==undefined?n:",",a=a!==undefined?a:".";var r=g(e),o=e<0?"-":"",i=e<0?r.split("-")[1]:r,u=i.split(".")[1]&&i.split(".")[1].slice(0,t),s=i.split(".")[0],c=this.rightPad(u,"0",t),l=s;return 1e3<=Number(s)&&(l=s.replace(/./g,function(e,t,r){return t&&e!==a&&(r.length-t)%3==0?n+e:e})),o+l+(0<c.length?a:"")+c},d.prototype.round=function(e,t){return.5!=e%1?Number(Math.round(e+"e"+t)+"e-"+t):Number(e)},d.prototype.roundToDown=function(e){return Math.floor(e)},d.prototype.removeFirstZeros=function(e){return e.replace(/^0+/,"")},d.prototype.pad=function(e,t,r){for(var n=e;n.length<r;)n=t+n;return n},d.prototype.rightPad=function(e,t,r){if(e===undefined||null===e||""===e)return t.repeat(r);for(var n=e.toString();n.length<r;)n+=t;return n},d.prototype.formatMeasureUnit=function(e){switch(e){case"YD3":return"Yd³";case"M3":return"M³";default:return e}},d.decorators=[{type:a.Injectable}],d.ctorParameters=function(){return[]},d);function d(){}var p=(f.prototype.transform=function(e,t,r,n,a,o){try{if(e!==undefined&&!1===isNaN(e))if(this.value=e.toString(),r=parseInt(r.toString(),undefined),e<0){var i=parseFloat(e.toString().replace(/\-/g,"")),u=this.formatter.formatNumber(i,r,n,a);this.value=o?"-"+u+t:"-"+t+u}else this.value=t+this.formatter.formatNumber(e,r,n,a);else this.value=""}catch(s){console.error("Value trying to transform: ",e),console.error(s),this.value=""}return this.value},f.decorators=[{type:a.Pipe,args:[{name:"cmxCurrencyCustom",pure:!0}]}],f.ctorParameters=function(){return[{type:l}]},f);function f(e){this.formatter=e,this.value=""}var m=(y.prototype.transform=function(e,t){if(""===e||null==e||isNaN(e))return console.warn("The value is not a number"),"";if((t=t||this.window.sessionStorage.getItem("country"))==undefined)return console.warn("Can't retrieve countryCode"),"";var r=this.translation.getLanguageByCountryCode(t),n=r.currencySymbolFloat&&r.currencySymbolFloat.toLowerCase()||"left",a=r.currencySymbol||"$",o=this.formatter.formatNumber(e,r&&r.decimalNumbersMoney,r&&r.thousandSeparator,r&&r.decimalSeparator);return"&lrm;"+("left"===n?""+a+o:""+o+a)},y.decorators=[{type:a.Pipe,args:[{name:"cmxCurrency",pure:!0}]}],y.ctorParameters=function(){return[{type:l},{type:i},{type:undefined,decorators:[{type:a.Inject,args:[a.PLATFORM_ID]}]}]},y);function y(e,t,r){this.formatter=e,this.translation=t,this.platformId=r,n.isPlatformBrowser(r)&&(this.window=window)}var S=(v.prototype.transform=function(e,t){return void 0===t&&(t=s.ConvertToLocal),this.formatterService.formatDateTimeMoment(e,this.translationService.selectedLanguage.languageISO.replace("_","-"),this.translationService.selectedLanguage.formatDate,t)},v.decorators=[{type:a.Pipe,args:[{name:"cmxDateMoment",pure:!1}]}],v.ctorParameters=function(){return[{type:i},{type:l}]},v);function v(e,t){this.translationService=e,this.formatterService=t}var L=(T.prototype.format=function(a,e,o,i){var u,s,c,l=this,g="",d="/",h=e.split(d);return 1===h.length&&(d="-",h=e.split(d)),1===h.length&&(d=" ",h=e.split(d)),1===h.length&&(d=".",h=e.split(d)),h.forEach(function(e,t){var r=a,n=e.replace(",","");e.includes("d")||e.includes("D")?(u=l.getDay(r,n,o),e=e.replace(n,u)):e.includes("m")||e.includes("M")?(s=l.getMonth(r,n,i),e=e.replace(n,s)):(e.includes("y")||e.includes("Y"))&&(c=l.getYear(r,n),e=e.replace(n,c)),t!==h.length-1?g+=e+d:g+=e}),g},T.prototype.getDateObject=function(e){try{var t=e.replace(/-g/,"/").split(/\D/),r=parseInt(t[1],undefined)-1;return 3===t.length?new Date(t[0],r,t[2]):new Date(t[0],r,t[2],t[3],t[4],t[5])}catch(n){return undefined}},T.prototype.addZero=function(e){return e<10?"0"+e:e.toString()},T.prototype.getDay=function(e,t,r){var n;return 4===t.length?n=r[e.getDay()]:3===t.length?n=r[e.getDay()].substring(0,3):2!==t.length&&1!==t.length||(n=this.addZero(e.getDate())),t===t.toLowerCase()&&(n=n.toLowerCase()),n},T.prototype.getMonth=function(e,t,r){var n;return 4===t.length?n=r[e.getMonth()]:3===t.length?n=r[e.getMonth()].substring(0,3):2===t.length&&(n=this.addZero(e.getMonth()+1)),t===t.toLowerCase()&&(n=n.toLowerCase()),n},T.prototype.getYear=function(e,t){return 4===t.length?""+e.getFullYear():(""+e.getFullYear()).substring(2)},T.decorators=[{type:a.Injectable}],T.ctorParameters=function(){return[]},T);function T(){}var b=(N.prototype.transform=function(e,t){try{if("number"==typeof e&&(e=new Date(e)),"string"==typeof e&&(e=this.dateFormatter.getDateObject(e)),t!==undefined&&null!==t||(t=sessionStorage.getItem("country")),e!==undefined&&e instanceof Date){var r=localStorage.getItem("language"),n=this.translation.getLanguage(r||"en_US");this.daysNames=n.dayNames.split(","),this.monthsNames=n.monthNames.split(","),this.value=this.dateFormatter.format(e,n.formatDate,this.daysNames,this.monthsNames)}else console.error("Date trying to transform: ",e),this.value=""}catch(a){console.error("Date trying to transform: ",e),console.error(a),this.value=""}return this.value},N.decorators=[{type:a.Pipe,args:[{name:"cmxDate",pure:!0}]}],N.ctorParameters=function(){return[{type:i},{type:L}]},N);function N(e,t){this.translation=e,this.dateFormatter=t,this.value="",this.monthsNames=[],this.daysNames=[]}var D=(M.prototype.transform=function(e,t){return void 0===t&&(t=s.ConvertToLocal),this.formatterService.formatDateTimeMoment(e,this.translationService.selectedLanguage.languageISO.replace("_","-"),this.translationService.selectedLanguage.formatDate+" "+this.translationService.selectedLanguage.formatTime,t)},M.decorators=[{type:a.Pipe,args:[{name:"cmxDateTimeMoment",pure:!1}]}],M.ctorParameters=function(){return[{type:i},{type:l}]},M);function M(e,t){this.translationService=e,this.formatterService=t}var w=(C.prototype.transform=function(e){return this.formatterService.formatNumberTS(e,this.translationService.selectedLanguage.languageISO.replace("_","-"),this.translationService.selectedLanguage.decimalNumbers)},C.decorators=[{type:a.Pipe,args:[{name:"cmxNumber",pure:!1}]}],C.ctorParameters=function(){return[{type:i},{type:l}]},C);function C(e,t){this.translationService=e,this.formatterService=t}var I=(O.prototype.transform=function(e,t){return void 0===t&&(t=s.ConvertToLocal),this.formatterService.formatDateTimeMoment(e,this.translationService.selectedLanguage.languageISO.replace("_","-"),this.translationService.selectedLanguage.formatTime,t)},O.decorators=[{type:a.Pipe,args:[{name:"cmxTimeMoment",pure:!1}]}],O.ctorParameters=function(){return[{type:i},{type:l}]},O);function O(e,t){this.translationService=e,this.formatterService=t}var A=(P.decorators=[{type:a.NgModule,args:[{declarations:[p,m,S,b,D,w,I],exports:[p,m,S,b,D,w,I],imports:[n.CommonModule]}]}],P);function P(){}var x=(j.prototype.getDirection=function(){return this.direction$.asObservable()},j.prototype.getRTL=function(){return this.rtl$.asObservable()},j.prototype.getDirectionFor=function(e){var t=this.translation.getLanguage(e.split(/[-_]/)[0]);this.direction$.next(t.dir)},j.prototype.getRtlFor=function(e){var t=this.translation.getLanguage(e.split(/[-_]/)[0]);this.rtl$.next(t.rtl)},j.decorators=[{type:a.Injectable}],j.ctorParameters=function(){return[{type:i}]},j);function j(e){var t=this;this.translation=e,this.direction$=new o.Subject,this.rtl$=new o.Subject,this.translation.getSelectedLanguage().subscribe(function(e){t.direction$.next(e.direction),t.rtl$.next(e.rtl)})}var F=(_.prototype.getConfiguration=function(e){switch(e){case"en":return{hourShort:"hr",minuteShort:"min",monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",secondShort:"sec",weekdaysMin:"Su,Mo,Tu,We,Th,Fr,Sa",weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"};case"es":return{hourShort:"hr",minuteShort:"min",monthsShort:"Ene,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic",secondShort:"seg",weekdaysMin:"Do,Lu,Ma,Mi,Ju,Vi,Sá",weekdaysShort:"Dom,Lun,Mar,Mié,Jue,Vie,Sáb"};case"fr":return{hourShort:"h",minuteShort:"min",monthsShort:"Janv,Févr,Mars,Avr,Mai,Juin,Juil,Août,Sept,Oct,Nov,Déc",secondShort:"sec",weekdaysMin:"Di,Lu,Ma,Me,Je,Ve,Sa",weekdaysShort:"Dim,Lun,Mar,Mer,Jeu,Ven,Sam"};case"de":return{hourShort:"Std.",minuteShort:"Min.",monthsShort:"Jan,Febr,Mrz,Apr,Mai,Jun,Jul,Aug,Sept,Okt,Nov,Dez",secondShort:"Sekunde",weekdaysMin:"So,Mo,Di,Mi,Do,Fr,Sa",weekdaysShort:"So,Mo,Di,Mi,Do,Fr,Sa"};case"he":return{hourShort:"שעה",minuteShort:"דקות",monthsShort:"ינו׳,פבר׳,מרץ,אפר׳,מאי,יוני,יולי,אוג׳,ספט׳,אוק׳,נוב׳,דצמ׳",secondShort:"שנייה",weekdaysMin:"א,ב,ג,ד,ה,ו,ש",weekdaysShort:"א׳,ב׳,ג׳,ד׳,ה׳,ו׳,ש׳"};case"pl":return{hourShort:"h",minuteShort:"min",monthsShort:"Sty,Lut,Mar,Kwi,Maj,Cze,Lip,Sie,Wrz,Paź,Lis,Gru",secondShort:"s",weekdaysMin:"Nd,Pn,Wt,Śr,Cz,Pt,So",weekdaysShort:"Ndz,Pon,Wt,Śr,Czw,Pt,Sob"};default:return{hourShort:"hr",minuteShort:"min",monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",secondShort:"sec",weekdaysMin:"Su,Mo,Tu,We,Th,Fr,Sa",weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"}}},_.decorators=[{type:a.Injectable}],_.ctorParameters=function(){return[]},_);function _(){}var k=(J.prototype.resolve=function(e,t){return this.translationService.languageLoaded},J.decorators=[{type:a.Injectable}],J.ctorParameters=function(){return[{type:i}]},J);function J(e){this.translationService=e}e.AngularLocalizationModule=A,e.DateTimeActions=s,e.FormatterService=l,e.TranslationService=i,e.DirectionService=x,e.LocaleService=F,e.DateFormatterService=L,e.CmxCurrencyCustomPipe=p,e.CmxCurrencyPipe=m,e.CmxDatePipe=b,e.CmxDateMomentPipe=S,e.CmxTimeMomentPipe=I,e.CmxDateTimeMomentPipe=D,e.CmxNumberPipe=w,e.TranslationResolver=k,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=cemex-core-angular-localization-v7.umd.min.js.map